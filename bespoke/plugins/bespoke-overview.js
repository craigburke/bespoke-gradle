//# sourceMappingURL=bespoke/plugins/bespoke-overview.js.map
(function(J){if("object"===typeof exports&&"undefined"!==typeof module)module.exports=J();else if("function"===typeof define&&define.amd)define([],J);else{var e;e="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this;e=e.bespoke||(e.bespoke={});e=e.plugins||(e.plugins={});e.overview=J()}})(function(){return function e(h,f,d){function b(l,g){if(!f[l]){if(!h[l]){var k="function"==typeof require&&require;if(!g&&k)return k(l,!0);if(u)return u(l,!0);
k=Error("Cannot find module '"+l+"'");throw k.code="MODULE_NOT_FOUND",k;}k=f[l]={exports:{}};h[l][0].call(k.exports,function(d){var k=h[l][1][d];return b(k?k:d)},k,k.exports,e,h,f,d)}return f[l].exports}for(var u="function"==typeof require&&require,g=0;g<d.length;g++)b(d[g]);return b}({1:[function(e,h,f){h.exports=function(d){e("insert-css")(".bespoke-parent.bespoke-overview{pointer-events:auto}.bespoke-overview :not(img){pointer-events:none}.bespoke-overview .bespoke-slide{opacity:1;visibility:visible;cursor:pointer;pointer-events:auto}.bespoke-overview .bespoke-active{outline:6px solid #cfd8dc;outline-offset:-3px;-moz-outline-radius:3px}.bespoke-overview .bespoke-bullet{opacity:1;visibility:visible}.bespoke-overview-counter{counter-reset:overview}.bespoke-overview-counter .bespoke-slide::after{counter-increment:overview;content:counter(overview);position:absolute;right:.75em;bottom:.5em;font-size:1.25rem;line-height:1.25}.bespoke-title{visibility:hidden;position:absolute;top:0;left:0;width:100%;pointer-events:auto}.bespoke-title h1{margin:0;font-size:1.6em;line-height:1.2;text-align:center}.bespoke-overview:not(.bespoke-overview-to) .bespoke-title{visibility:visible}.bespoke-overview-to .bespoke-active,.bespoke-overview-from .bespoke-active{z-index:1}",
{prepend:!0});return function(b){d="object"===typeof d?d:{};var e=/, */,g=/^none(?:, ?none)*$/,l=/^translate\((.+?)px, ?(.+?)px\) scale\((.+?)\)$/,h=/(^\?|&)overview(?=$|&)/,k=!("transition"in document.body.style)&&"webkitTransition"in document.body.style?"webkitTransitionEnd":"transitionend",f=["webkit","Moz"],q="number"===typeof d.columns?parseInt(d.columns):3,K="number"===typeof d.margin?parseFloat(d.margin):15,z=null,v,w=function(a,c){if(!(c in a.style))for(var P=c.charAt(0).toUpperCase()+c.substr(1),
b=0,d=f.length;b<d;b++)if(f[b]+P in a.style)return f[b]+P;return c},L=function(a){if("zoom"in a.style)return parseFloat(a.style.zoom)||void 0},E=function(a){var c=[],b=getComputedStyle(a),d=b[w(a,"transitionProperty")];if(!d||g.test(d))return c;var d=d.split(e),k=b[w(a,"transitionDuration")].split(e),l=b[w(a,"transitionDelay")].split(e);d.forEach(function(a,b){"0s"===k[b]&&"0s"===l[b]||c.push(a)});return c},x=function(a,c,b,d){c&&(a.style[c]=b);a.offsetHeight;c&&(a.style[c]=d)},F=function(){b.on("activate",
F)();b.parent.scrollLeft=b.parent.scrollTop=0;(d.autostart||h.test(location.search))&&setTimeout(B,100)},Q=function(){r(b.slides.indexOf(this))},G=function(a,c){var d=c.index+a;0<=d&&d<b.slides.length&&b.slide(d,{preview:!0});return!1},V=function(a){!1!==a.scrollIntoView&&H(a.slide,a.index,L(a.slide))},R=function(a){var c=location.search.replace(h,"").replace(/^[^?]/,"?$&");a?history.replaceState(null,null,location.pathname+(0<c.length?c+"&":"?")+"overview"+location.hash):history.replaceState(null,
null,location.pathname+c+location.hash)},H=function(a,c,d){b.parent.scrollTop=c<q?0:b.parent.scrollTop+a.getBoundingClientRect().top*(d||1)},I=function(a,c,b,d){b.removeEventListener(k,v,!1);d&&d!==b&&d.removeEventListener(k,v,!1);v=void 0;c.remove("bespoke-overview-"+a)},W=function(a){var c=a.firstElementChild;if(c.classList.contains("bespoke-title"))return c.style.width="",c;var b=document.createElement("header");b.className="bespoke-title";b.style[w(b,"transformOrigin")]="0 0";var d=document.createElement("h1");
d.appendChild(document.createTextNode(a.getAttribute("data-title")||document.title));b.appendChild(d);x(a.insertBefore(b,c));return b},B=function(){var a=b.slides,c=b.parent,e=c.classList,l=a.length-1,s=b.slide(),g=0<s?a[0]:a[l],h=w(g,"transform"),n=c.querySelector(".bespoke-scale-parent"),m=1,f,p,M=0,u=z,S="webkitAppearance"in c.style;if(n)m=parseFloat(n.style[h].slice(6,-1));else if(f=L(g))m=f;v&&I("from",e,a[0],a[l]);d.title&&(p=W(c));u||(b.slide(s,{preview:!0}),e.add("bespoke-overview"),addEventListener("resize",
B,!1),z=[b.on("activate",V),b.on("prev",G.bind(null,-1)),b.on("next",G.bind(null,1))],d.counter&&e.add("bespoke-overview-counter"),d.location&&R(!0),e.add("bespoke-overview-to"),M=0<l?E(g).length:0>E(g).join(" ").indexOf("transform")?0:1,c.style.overflowY="scroll",c.style.scrollBehavior="smooth",S&&a.forEach(function(a){x(a,"marginBottom","0%","")}));var T=c.clientWidth/m,r=(n||c).offsetWidth-c.clientWidth,F=n?r/2/m:0,n=g.offsetWidth,A=T/(q*n+(q+1)*K),N=m*A,t=n*A,D=g.offsetHeight*A,X=(T-t)/2,Y=(c.clientHeight/
m-D)/2,U=K*A,O=0,C=0,y=0;p&&(!1!==d.scaleTitle?(p.style[f?"zoom":h]=f?N:"scale("+N+")",p.style.width=c.clientWidth/N+"px",O=p.offsetHeight*A):(0<r&&(p.style.width=c.clientWidth+"px"),O=p.offsetHeight/m));a.forEach(function(a){var b=y*t+(y+1)*U-F-X,c=C*D+(C+1)*U+O-Y;a.style[h]="translate("+(0>b.toString().indexOf("e-")?b:0)+"px, "+(0>c.toString().indexOf("e-")?c:0)+"px) scale("+A+")";C*q+y===l&&(a.style.marginBottom=K+"px");a.addEventListener("click",Q,!1);y===q-1?(C+=1,y=0):y+=1});u?H(a[s],s,f):0<
M?g.addEventListener(k,v=function(b){b.target===this&&0===--M&&(I("to",e,this),S&&c.scrollHeight>c.clientHeight&&x(c,"overflowY","auto","scroll"),H(a[s],s,f))},!1):(a.forEach(function(a){x(a)}),e.remove("bespoke-overview-to"),H(a[s],s,f))},r=function(a){b.slide("number"===typeof a?a:b.slide(),{scrollIntoView:!1});a=b.slides;var c=b.parent,e=c.classList,g=a.length-1,f=0<b.slide()?a[0]:a[g],h=w(f,"transform"),u=w(f,"transition"),n=c.querySelector(".bespoke-scale-parent"),m,q="webkitAppearance"in c.style;
n?m=parseFloat(n.style[h].slice(6,-1)):(m=L(f))||(m=1);v&&I("to",e,a[0],a[g]);var p=c.scrollTop/m,r=(c.offsetWidth-(n||c).clientWidth)/2/m;c.style.scrollBehavior=c.style.overflowY="";a.forEach(function(a){q&&x(a,"marginBottom","0%","");a.removeEventListener("click",Q,!1)});(p||r)&&a.forEach(function(a){var b=a.style[h].match(l);a.style[h]="translate("+(parseFloat(b[1])-r)+"px, "+(parseFloat(b[2])-p)+"px) scale("+b[3]+")";x(a,u,"none","")});c.scrollTop=0;e.remove("bespoke-overview");removeEventListener("resize",
B,!1);(z||[]).forEach(function(a){a()});z=null;d.counter&&e.remove("bespoke-overview-counter");d.location&&R(!1);e.add("bespoke-overview-from");var t=0<g?E(f).length:0>E(f).join(" ").indexOf("transform")?0:1;a.forEach(function(a){a.style[h]=""});0<t?f.addEventListener(k,v=function(a){a.target===this&&0===--t&&I("from",e,this)},!1):(a.forEach(function(a){x(a)}),e.remove("bespoke-overview-from"))},t=function(){z?r():B()},D=function(a){if(79===a.which)a.altKey||a.ctrlKey||a.metaKey||a.shiftKey||t();
else if(z)switch(a.which){case 13:a.altKey||a.ctrlKey||a.metaKey||a.shiftKey||r();break;case 38:return G(-q,{index:b.slide()});case 40:return G(q,{index:b.slide()})}};b.on("activate",F);b.on("destroy",function(){removeEventListener("resize",B,!1);document.removeEventListener("keydown",D,!1)});b.on("overview",t);document.addEventListener("keydown",D,!1)}}},{"insert-css":2}],2:[function(e,h,f){var d={};h.exports=function(b,e){if(!d[b]){d[b]=!0;var g=document.createElement("style");g.setAttribute("type",
"text/css");"textContent"in g?g.textContent=b:g.styleSheet.cssText=b;var f=document.getElementsByTagName("head")[0];e&&e.prepend?f.insertBefore(g,f.childNodes[0]):f.appendChild(g)}}},{}]},{},[1])(1)});